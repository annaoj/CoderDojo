<div class="search-div row">
  <div class="col-md-8">
    <mat-form-field class="search-form-field" floatLabel="never">
      <input
        matInput
        [(ngModel)]="searchKey"
        placeholder="Search"
        autocomplete="off"
        (keyup)="applyFilter()"
      />
    </mat-form-field>
  </div>
  <div *ngIf="isAuthorized" class="col-md-4 mr-0">
    <button (click)="openCreateForm()" class="create-btn" mat-button>
      Create
      <i class="fas fa-2x fa-plus-circle"></i>
    </button>
  </div>
</div>
<div  *ngIf="isAuthorized && isCreateMeeting" class="search-div row">
  <!-- create form-->
  <div class="col-12">
    <form class="form-inline">
      <div class="form-group mb-2">
        <input
          class="form-control"
          type="text"
          name="task"
          placeholder="name"
          [(ngModel)]="newMeeting.name"
        />
      </div>
      <div class="form form-group mx-sm-3 mb-2">
        <input
          type="text"
          name="locationId"
          placeholder="location"
          [(ngModel)]="newMeeting.location.id"
          class="form-check-input"
        />
      </div>
      <div class="form-group mx-sm-3 mb-2">
        <input
          class="form-control"
          type="text"
          name="task"
          placeholder="date"
          [(ngModel)]="newMeeting.scheduledTime"
        />
      </div>
      <button
        class=" ml-2 btn btn-outline-success"
        type="submit"
        value="Add Item"
        (click)="addMeeting()"
      >Save</button>
    </form>
<br>
    <form #createForm = "ngForm">
        <input type="text" name="name" ngModel>
        <input type="text" name="locationId" ngModel>
        <input type="text" name="scheduledTime" ngModel>
        <input type="submit" name="submit" value="Add" (click) = "addPerson(createForm)">
      </form>
  </div>
</div>

<mat-table [dataSource]="listData" matSort>
  <ng-container matColumnDef="name">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
    <mat-cell *matCellDef="let element">{{ element.name }}</mat-cell>
  </ng-container>
  <ng-container matColumnDef="location.name">
    <mat-header-cell
      *matHeaderCellDef
      className="mat-sort-header-button"
      mat-sort-header
      >Location
    </mat-header-cell>
    <mat-cell *matCellDef="let element">{{ element.location.name }}</mat-cell>
  </ng-container>
  <ng-container matColumnDef="scheduledTime">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Date</mat-header-cell>
    <mat-cell *matCellDef="let element">{{
      element.scheduledTime | date
    }}</mat-cell>
  </ng-container>
  <ng-container matColumnDef="Attendees">
    <mat-header-cell *matHeaderCellDef>Attendees</mat-header-cell>
    <mat-cell *matCellDef="let element"
      ><a (click)="displayAttendeesList(meeting)"
        ><i class="fas fa-user-friends"></i></a
    ></mat-cell>
  </ng-container>
  <ng-container matColumnDef="Actions">
    <mat-header-cell *matHeaderCellDef></mat-header-cell>
    <mat-cell *matCellDef="let row">
      <button class="editIcon" mat-icon-button>
        <mat-icon>edit</mat-icon>
      </button>
      <button mat-icon-button class="deletIcon">
        <mat-icon>delete_outline</mat-icon>
      </button>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="loading">
    <mat-footer-cell *matFooterCellDef colspan="6">
      Loading data...
    </mat-footer-cell>
  </ng-container>
  <ng-container matColumnDef="noData">
    <mat-footer-cell *matFooterCellDef colspan="6">
      No data.
    </mat-footer-cell>
  </ng-container>
  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
  <mat-footer-row
    *matFooterRowDef="['loading']"
    [ngClass]="{ hide: listData != null }"
  ></mat-footer-row>
  <mat-footer-row
    *matFooterRowDef="['noData']"
    [ngClass]="{ hide: !(listData != null && listData.data.length == 0) }"
  ></mat-footer-row>
</mat-table>
<mat-paginator
  [pageSizeOptions]="[1, 10, 25, 100]"
  [pageSize]="5"
  showFirstLastButtons
></mat-paginator>

<!--
<table class="table table-striped" >
  <thead>
      <th scope="col">Name</th>
      <th scope="col">Location</th>
      <th scope="col">Scheduled</th>
      <th *ngIf="isAuthorized" scope="col">Attendess</th>
      <th *ngIf="isAuthorized" scope="col">Edit</th>
      <th *ngIf="isAuthorized" scope="col">Delete</th>
    </thead>
<tr *ngFor="let meeting of meetings " >
<td>{{meeting.name}}</td>
<td>{{meeting.location.name}}  </td>
<td>{{meeting.scheduledTime}}</td>
<td *ngIf="isAuthorized"><a (click)="displayAttendeesList(meeting)">List Attendees</a>  </td>
<td *ngIf="isAuthorized"><button (click)="setEditMeeting(meeting)">Edit</button>  </td>
<td *ngIf="isAuthorized"><button (click)='deleteMeeting(meeting)'>Delete</button>  </td>
</tr>
</table> -->

<!-- edit section -->
<!-- <div *ngIf='editMeeting'>
  <form class='form'>
    <input type="text" name='name' [(ngModel)]="meeting.name" class='form-control'> <br>
    <input type="text" name='scheduledTime' [(ngModel)]="meeting.scheduledTime" class='form-control'> <br>
    <input type="text" name='locationId' [(ngModel)]="meeting.location.id" class='form-check-input'>
    <button (click)='editMeeting=null' class='btn btn-danger'>Cancel</button>
    <button (click)='updateMeeting(meeting)' class='btn btn-success'>Save</button>
  </form>
</div> -->

<!-- create -->
<!-- <div  *ngIf="isAuthorized">
    <form>
        <div class="form-group">
        <input lass="form-control" type="text"
          name="task" placeholder="name" [(ngModel)]="newMeeting.name"/>
          <input lass="form-control" type="text"
          name="task" placeholder="date" [(ngModel)]="newMeeting.scheduledTime"/>
          <input type="text" name='locationId' [(ngModel)]="newMeeting.location.id" class='form-check-input'>
        <br>
        <input class=" ml-2 btn btn-outline-success"
          type="submit" value="Add Item" (click) = "addMeeting()">
        </div>
      </form>
</div> -->
<!-- <div  *ngIf="isAuthorized">
      <form>
          <div class="form-group">
          <input lass="form-control" type="text"
            name="task" placeholder="name" [(ngModel)]="newMeeting.name"/>
            <input lass="form-control" type="text"
            name="task" placeholder="date" [(ngModel)]="newMeeting.scheduledTime"/>
            <input type="text" name='locationId' [(ngModel)]="newMeeting.location.id" class='form-check-input'>
          <input class=" ml-2 btn btn-outline-success"
            type="submit" value="Add Item" (click) = "addMeeting()">
          </div>
        </form>
  </div>
<div *ngIf="displayAttendees">
  <table class="table table-striped" >
      <thead>
          <th scope="col">First Name</th>
          <th scope="col">Last Name</th>
          <th scope="col">Location</th>
          <th scope="col">Scheduled</th>
          <th *ngIf="isAuthorized" scope="col">Edit</th>
          <th *ngIf="isAuthorized" scope="col">Delete</th>
        </thead>
    <tr *ngFor="let attend of selected.meetingAttendees " >
    <td>{{attend.attended}}</td>

        <td>{{attend.userDetail.nickname}}  </td>
        <td>{{attend.userDetail.phoneNumber}}</td>


    <td *ngIf="isAuthorized"><button (click)="setEditMeeting(meeting)">Edit</button>  </td>
    <td *ngIf="isAuthorized"><button (click)='deleteMeeting(meeting)'>Delete</button>  </td>
    </tr>
    </table>
  </div> -->
